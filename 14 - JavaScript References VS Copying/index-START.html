<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>JS Reference VS Copy</title>
    </head>
    <body>

        <script>
// start with strings, numbers and booleans
let age = 100;
let age2 = age;
age = 200;
console.log(`${age} and ${age2}`);

let name = 'Alvaro';
let name2 = name;
name = 'Clemente';
console.log(`${name} and ${name2}`);

let bool = true;
let bool2 = bool;
bool = false;
console.log(`${bool} and ${bool2}`);

// Let's say we have an array
const players = ['Wes', 'Sarah', 'Ryan', 'Poppy'];
const playerss = players;
players.pop();
console.log(`${players} and ${playerss}`);

// and we want to make a copy of it.

// You might think we can just do something like this:

// however what happens when we update that array?

// now here is the problem!

// oh no - we have edited the original array too!

// Why? It's because that is an array reference, not an array copy. They both point to the same array!

// So, how do we fix this? We take a copy instead!
const players2 = ['Wes', 'Sarah', 'Ryan', 'Poppy'];
const playersCopy = players2.slice();
players2.pop();
console.log('With slice');
console.log(`${players2} and ${playersCopy}`);


// one way

// or create a new array and concat the old one in
const playerConcat = [].concat(players2); //Esto tambien funciona

// or use the new ES6 Spread
const players3 = ['Wes', 'Sarah', 'Ryan', 'Poppy'];
const playersCopy2 = [...players3];
players3.pop();
console.log('With ES6 Spread');
console.log(`${players3} and ${playersCopy2}`);
// now when we update it, the original one isn't changed
const playerFrom = Array.from(players2);

// The same thing goes for objects, let's say we have a person object

// with Objects
const person = {
    name: 'Wes Bos',
    age: 80
};

// and think we make a copy:
p2 = person;
//p2.number = 99;
//console.log('99 should not appear here...');
//console.log(person); //99 should not appear

// how do we take a copy instead?
const copyPerson = Object.assign({}, person);
// person.number = 99;
// console.log(person);
// console.log(copyPerson);

// We will hopefully soon see the object ...spread
const modifiedPerson = Object.assign({}, person, {age: 12, number: 170});
console.log(person);
console.log(modifiedPerson);

// Things to note - this is only 1 level deep - both for Arrays and Objects. lodash has a cloneDeep method, but you should think twice before using it.

        </script>

    </body>
</html>
